var $window=$(window),gardenCtx,gardenCanvas,$garden,garden;var clientWidth=$(window).width();var clientHeight=$(window).height();$(function(){$loveHeart=$("#loveHeart");var A=$loveHeart.width()/2;var B=$loveHeart.height()/2-55;$garden=$("#garden");gardenCanvas=$garden[0];gardenCanvas.width=$("#loveHeart").width();gardenCanvas.height=$("#loveHeart").height();gardenCtx=gardenCanvas.getContext("2d");gardenCtx.globalCompositeOperation="lighter";garden=new Garden(gardenCtx,gardenCanvas);$("#content").css("width",$("#code").width());$("#content").css("height",$("#code").height());if(screenheight<900||screenwidth<1600){$("#content").css("margin-top",Math.max(($window.height()-$("#content").height())/6,40));$("#content").css("margin-left",Math.max(($window.width()-$("#content").width())/4,40))}else{$("#content").css("margin-top",Math.max(($window.height()-$("#content").height())/3,80));$("#content").css("margin-left",Math.max(($window.width()-$("#content").width())/2,80))}$("#loveHeart").hide();setInterval(function(){garden.render()},Garden.options.growSpeed)});$(window).resize(function(){var B=$(window).width();var A=$(window).height();if(B!=clientWidth&&A!=clientHeight){location.replace(location)}});function addImages(A){var B=A%19;$("#images").html($("#images").html()+"<span id='"+B+"' style='display:none' ><img  src='rili/"+B+".jpg'height='110px'><span>");setTimeout("showNewImage("+B+")",1000);if(A%19==0&&A>0){$("#images").html("")}}var ImageTitarr=new Array();ImageTitarr[0]="南信初识";ImageTitarr[1]="南阶考研";ImageTitarr[2]="苏州乐园";ImageTitarr[3]="秦淮河畔";ImageTitarr[4]="秦皇南戴";ImageTitarr[5]="家乡林处";ImageTitarr[6]="赤峰草原";ImageTitarr[7]="地坛";ImageTitarr[8]="哈尔滨";ImageTitarr[9]="北师大校园";ImageTitarr[10]="秋日山上";ImageTitarr[11]="天津";ImageTitarr[12]="香山";ImageTitarr[13]="长城";ImageTitarr[14]="十渡";ImageTitarr[15]="蹦极";ImageTitarr[16]="海淀领证";ImageTitarr[17]="蒙山婚礼";ImageTitarr[18]="未来之路";function changeImages(){var A=count%19;$("#imageshow img").fadeOut(500);$("#imageshow img").hide();$("#imageshow div").hide();$("#imageshow img").attr("src","rili/"+A+".jpg");$("#imageshow div span").html(ImageTitarr[A]);$("#imageshow div").fadeIn(800);$("#imageshow img").fadeIn(800);count++;if(count%19==0&&count>0){clearInterval(changeID);$("#imageshow div").fadeTo(2000,0)}}function showNewImage(A){$("#"+A).fadeIn()}function getHeartPoint(D){var B=D/Math.PI;var A=19.5*(16*Math.pow(Math.sin(B),3));var C=-20*(13*Math.cos(B)-5*Math.cos(2*B)-2*Math.cos(3*B)-Math.cos(4*B));return new Array(offsetX+A,offsetY+C)}function preStartheart(){$("#imageshow img").animate({marginLeft:"270px",marginTop:"350px",},500,"swing",startHeartAnimation())}function startHeartAnimation(){if(screenheight<900||screenwidth<1600){$("#code").css("width","330px").css("height","600px").css("line-height","20px")}else{$("#code").css("width","380px").css("height","630px").css("line-height","22px").css("font-size","13px")}$loveHeart=$("#loveHeart");var A=$loveHeart.width()/2;var B=$loveHeart.height()/2-55;$garden=$("#garden");adjustCodePosition();if(parseInt($("#code").css("margin-top"))<0){$("#code").css("margin-top","0")}$("#loveHeart").show();$("#content").css("width",$loveHeart.width()+parseInt($("#code").css("width")));$("#content").css("height",Math.max($loveHeart.height(),$("#code").height()));$("#content").css("margin-top",Math.max(($window.height()-$("#content").height())/10,10));if(screenheight<900||screenwidth<1600){$("#code").css("margin-top","0")}var C=40;var F=10;var E=new Array();var D=setInterval(function(){var I=getHeartPoint(F);var K=true;for(var G=0;G<E.length;G++){var H=E[G];var J=Math.sqrt(Math.pow(H[0]-I[0],2)+Math.pow(H[1]-I[1],2));if(J<Garden.options.bloomRadius.max*1.3){K=false;break}}if(K){E.push(I);garden.createRandomBloom(I[0],I[1])}if(F>=30){clearInterval(D);showMessages()}else{F+=0.2}},C)}(function(A){A.fn.typewriter=function(){this.each(function(){var D=A(this),E=D.html(),B=0;D.html("");var C=setInterval(function(){var F=E.substr(B,1);if(F=="<"){B=E.indexOf(">",B)+1}else{if(F=="&"){B=E.indexOf(";",B)+1}else{B++}}D.html(E.substring(0,B)+(B&1?"_":""));if(B>=E.length){clearInterval(C)}},65)});return this}})(jQuery);function timeElapse(G){var E=Date();var D=(Date.parse(E)-Date.parse(G))/1000;var B=Math.floor(D/(3600*24));D=D%(3600*24);var A=Math.floor(D/3600);if(A<10){A="0"+A}D=D%3600;var C=Math.floor(D/60);if(C<10){C="0"+C}D=D%60;if(D<10){D="0"+D}var F='<span class="digit">'+B+'</span> days <span class="digit">'+A+'</span> hours <span class="digit">'+C+'</span> minutes <span class="digit">'+D+"</span> seconds";$("#elapseClock").html(F)}function showMessages(){adjustWordsPosition();$("#messages").fadeIn(5000,function(){showLoveU()})}function adjustWordsPosition(){$("#words").css("position","absolute");$("#words").css("top",$("#garden").position().top+195);$("#words").css("left",$("#garden").position().left+70)}function adjustCodePosition(){$("#code").css("margin-top",($("#garden").height()-$("#code").height())/2)}function showLoveU(){$("#loveu").fadeIn(3000);rorate()}function rorate(){$("#code").css("-o-transform","rotate(5deg)");$("#code").css("-webkit-transform","rotate(5deg)");$("#code").css("-moz-transform","rotate(5deg)");$("#loveu").fadeOut(1000,function(){$("#loveu").html("野有蔓草 零露瀼瀼").fadeIn(1000,function(){$("#loveu").fadeOut(1000,function(){$("#loveu").html("有美一人 婉如清扬").fadeIn(1000,function(){$("#loveu").fadeOut(1000,function(){$("#loveu").html("邂逅相遇 与子偕臧<div class='signature' style='display:none'></div>").fadeIn(1000,function(){$("#loveu .signature").html("- 爱你的维祥").fadeIn(2500)})})})})})})};