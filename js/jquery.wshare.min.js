!function(C){var A=function(E,D){this.init(E,D)};A.prototype={constructor:A,init:function(F,E){var D=this;this.$element=C(F);this.options=E||{}},postShare:function(F){var L=this.options.type||C(F).data("type");var I=this.options.source||C(F).data("source");var J=this.options.target||C(F).data("target");var H=this.getShareValue("wsContent");var K=this.getShareValue("wsUrl");var D=this.getShareValue("wsPic");var G=this.getShareValue("wsVideo");var E=this.generatorShare(L,H,K,D,G);this.openShareWin(E,750,500)},generatorShare:function(J,L,I,D,H){var K=I;var F="";var E={"weibo":"http://service.weibo.com/share/share.php?title=%content%&url=%url%&pic=%pic%","qq":"http://share.v.t.qq.com/index.php?c=share&a=index&title=%content%&url=%url%&pic=%pic%"};var G=E[J];if(!G){alert("参数非法")}if(!!H){K=H;F=!!I?" "+I:""}G=!!D?G.replace(/%pic%/g,encodeURIComponent(D)):G.slice(0,G.lastIndexOf("&"));G=!!K?G.replace(/%url%/g,encodeURIComponent(K)):(G.slice(0,G.indexOf("url=")-1)+G.slice(G.indexOf("%url%")+5));G=G.replace(/%content%/g,encodeURIComponent(L+F));return G},getShareValue:function(D){var F=typeof this.options[D];switch(F){case"function":var E=C.proxy(this.options[D],this)();if(!E){return E}else{return C.proxy(this.getDefaultValue,this,D)()}break;case"string":return this.options[D];break;case"undefined":default:return C.proxy(this.getDefaultValue,this,D)()}},getDefaultValue:function(D){var H=this.$element.context;var G=this.options.target||C(H).data("target")||C(H).attr("id");var F=G+"_"+D;var E=C("#"+F);if(!window[F]&&E.length==0){F=D;E=C("#"+F)}if(window[F]&&typeof window[F]=="string"){return window[F]}else{if(E.length>0&&E.val().length>0){return E.val()}else{switch(D){case"wsContent":return C("title").text();break;case"wsUrl":return window.location.href;break;case"wsPic":case"wsVideo":default:return false}}}},openShareWin:function(K,H,L){var J="分享项目";var D=H;var E=L;var I=(window.screen.availHeight-30-E)/2;var G=(window.screen.availWidth-10-D)/2;var F=["height=",E,",width=",D,",top=",I,",left=",G,",toolbar=no,menubar=no,scrollbars=auto,resizeable=no,location=no,status=no"].join("");window.open(K,J,F)}};var B=C.fn.wshare;C.fn.wshare=function(D,E){return this.each(function(){var F=C(this),H=F.data("wshare"),G=typeof D=="object"&&D;if(!H){F.data("wshare",(H=new A(this,G)))}if(typeof D=="string"){H[D](E)}})};C.fn.wshare.Constructor=A;C.fn.wshare.defaults={type:"weibo",target:false,wsContent:false,wsUrl:false,wsPic:false,wsVideo:false};C.fn.wshare.noConflict=function(){C.fn.wshare=B;return this}}(window.jQuery);$(document).on("click.wshare.data-api",'[data-toggle="wshare"]',function(A){var B=$(this);if(!B.data("wshare")){B.wshare()}B.wshare("postShare",this)});